<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="admin.css">

    <title>Simple Research Admin</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Research Paper Manager</h1>
            <p>Simple interface to add and manage research papers</p>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('add')">Add New Paper</button>
            <button class="tab" onclick="switchTab('manage')">Manage Papers</button>
            <button class="tab" onclick="switchTab('instructions')">How to Use</button>
        </div>
        
        <!-- Add New Paper Tab -->
        <div id="add-tab" class="tab-content active">
            <div id="success-message" class="success-message"></div>
            <div id="error-message" class="error-message"></div>
            
            <form id="research-form">
                <div class="form-group">
                    <label for="title">Research Paper Title</label>
                    <input type="text" id="title" name="title" placeholder="Enter the title of your research paper" required>
                </div>
                
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" placeholder="Provide a brief description of your research..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="image">Cover Image (optional)</label>
                    <div class="file-upload">
                        <input type="file" id="image" name="image" accept="image/*">
                        <label for="image" class="file-upload-label">
                            üì∑ Click to select an image (PNG, JPG, etc.)
                        </label>
                        <div id="image-info" class="file-info"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="pdf">PDF File</label>
                    <div class="file-upload">
                        <input type="file" id="pdf" name="pdf" accept=".pdf" required>
                        <label for="pdf" class="file-upload-label">
                            üìÑ Click to select your PDF file
                        </label>
                        <div id="pdf-info" class="file-info"></div>
                    </div>
                </div>
                
                <button type="submit" class="btn">Add Research Paper</button>
            </form>
        </div>
        
        <!-- Manage Papers Tab -->
        <div id="manage-tab" class="tab-content">
            <h3>Your Research Papers</h3>
            <div id="research-list" class="research-list">
                <!-- Papers will be loaded here -->
            </div>
        </div>
        
        <!-- Instructions Tab -->
        <div id="instructions-tab" class="tab-content">
            <div class="instructions">
                <h4>üìù How to Add a Research Paper:</h4>
                <ol>
                    <li><strong>Fill out the form:</strong> Enter your paper's title and description</li>
                    <li><strong>Upload image (optional):</strong> Add a cover image for your research paper</li>
                    <li><strong>Upload PDF:</strong> Select your research paper PDF file</li>
                    <li><strong>Click "Add Research Paper":</strong> Your paper will be automatically added to the website</li>
                </ol>
                
                <h4 style="margin-top: 30px;">üîß Important Notes:</h4>
                <ul style="margin-left: 20px;">
                    <li>PDF files should be under 10MB for best performance</li>
                    <li>Images work best at 400x300 pixels or similar ratio</li>
                    <li>Once added, papers appear immediately on your website</li>
                    <li>You can delete papers from the "Manage Papers" tab</li>
                </ul>
                
                <h4 style="margin-top: 30px;">‚ùì Need Help?</h4>
                <p>If you encounter any issues, contact your web developer or try refreshing the page.</p>
            </div>
        </div>
    </div>

    <script>
        // Store research papers in memory (in a real implementation, this would be a database)
        let researchPapers = [
            {
                id: 1,
                title: "Relationship Stress vs Academic Performance",
                description: "This study investigates the correlation between stress levels and academic performance among undergraduate students. It explores how chronic stress, time pressure, and emotional fatigue impact cognitive functioning and exam outcomes.",
                image: "research1.png",
                pdf: "relationship-stress.pdf",
                date: "2025-07-15"
            },
            {
                id: 2,
                title: "Post-Pandemic Coping Mechanisms for the Youth",
                description: "This research explores the coping strategies adopted by youth in the aftermath of the COVID-19 pandemic. It examines how young people navigate emotional distress, social isolation, and academic disruptions.",
                image: "research3.png", 
                pdf: "post-pandemic-coping.pdf",
                date: "2025-07-15"
            },
            {
                id: 3,
                title: "Early Childhood Intervention & Psychological Resilience",
                description: "This study examines how early childhood interventions contribute to the development of psychological resilience later in life. It focuses on programs that support emotional regulation.",
                image: "research2.png",
                pdf: "early-childhood-resilience.pdf", 
                date: "2025-07-15"
            }
        ];

        let nextId = 4;

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');

            if (tabName === 'manage') {
                loadResearchPapers();
            }
        }

        function showMessage(message, isError = false) {
            const successEl = document.getElementById('success-message');
            const errorEl = document.getElementById('error-message');
            
            if (isError) {
                errorEl.textContent = message;
                errorEl.style.display = 'block';
                successEl.style.display = 'none';
            } else {
                successEl.textContent = message;
                successEl.style.display = 'block';
                errorEl.style.display = 'none';
            }

            setTimeout(() => {
                successEl.style.display = 'none';
                errorEl.style.display = 'none';
            }, 5000);
        }

        function handleFileUpload(input, infoId) {
            const infoEl = document.getElementById(infoId);
            const file = input.files[0];
            
            if (file) {
                const fileSize = (file.size / 1024 / 1024).toFixed(2);
                infoEl.innerHTML = `
                    <strong>Selected:</strong> ${file.name}<br>
                    <strong>Size:</strong> ${fileSize} MB
                `;
                infoEl.style.display = 'block';
            } else {
                infoEl.style.display = 'none';
            }
        }

        function loadResearchPapers() {
            const listEl = document.getElementById('research-list');
            
            if (researchPapers.length === 0) {
                listEl.innerHTML = '<p>No research papers found. Add some papers in the "Add New Paper" tab!</p>';
                return;
            }

            listEl.innerHTML = researchPapers.map(paper => `
                <div class="research-item">
                    <div class="research-content">
                        <h3>${paper.title}</h3>
                        <p>${paper.description}</p>
                        <div class="research-meta">
                            üìÖ Added: ${paper.date} | 
                            üìÑ PDF: ${paper.pdf} | 
                            üñºÔ∏è Image: ${paper.image || 'None'}
                        </div>
                    </div>
                    <div class="research-actions">
                        <button class="btn btn-danger" onclick="deleteResearchPaper(${paper.id})">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteResearchPaper(id) {
            if (confirm('Are you sure you want to delete this research paper?')) {
                researchPapers = researchPapers.filter(paper => paper.id !== id);
                loadResearchPapers();
                showMessage('Research paper deleted successfully!');
            }
        }

        // File upload handlers
        document.getElementById('image').addEventListener('change', function() {
            handleFileUpload(this, 'image-info');
        });

        document.getElementById('pdf').addEventListener('change', function() {
            handleFileUpload(this, 'pdf-info');
        });

        // Form submission
        document.getElementById('research-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = new FormData(this);
            const title = formData.get('title');
            const description = formData.get('description');
            const imageFile = formData.get('image');
            const pdfFile = formData.get('pdf');

            // Validate required fields
            if (!title || !description || !pdfFile) {
                showMessage('Please fill in all required fields and select a PDF file.', true);
                return;
            }

            // Simulate file processing
            const imageFilename = imageFile.name ? `research${nextId}.${imageFile.name.split('.').pop()}` : null;
            const pdfFilename = `${title.toLowerCase().replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-')}.pdf`;

            // Create new research paper object
            const newPaper = {
                id: nextId++,
                title: title,
                description: description,
                image: imageFilename,
                pdf: pdfFilename,
                date: new Date().toISOString().split('T')[0]
            };

            // Add to array
            researchPapers.push(newPaper);

            // Show success message
            showMessage(`Research paper "${title}" has been added successfully! It will now appear on your website.`);

            // Clear form
            this.reset();
            document.getElementById('image-info').style.display = 'none';
            document.getElementById('pdf-info').style.display = 'none';

            // Note: In a real implementation, you would:
            // 1. Upload files to your server/cloud storage
            // 2. Update your website's database or content management system
            // 3. Trigger a rebuild of your static site (if using static site generators)
            console.log('New paper added:', newPaper);
        });

        // Load initial research papers on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadResearchPapers();
        });
    </script>
</body>
</html>